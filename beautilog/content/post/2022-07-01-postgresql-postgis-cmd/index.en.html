---
title: "PostgreSQL/PostGIS without instllation"
author: "Shipeng Sun"
date: "2022-07-01"
slug: "postgresql-start-cmd"
categories: Database
tags:
- PostgreSQL
- PostGIS
- geospatial database
type: ''
subtitle: ''
image: ''
---



<p><a href="https://www.postgresql.org/download/windows/">Using EnterpriseDB installer to install PostgreSQL</a> and <a href="http://www.bostongis.com/PrinterFriendly.aspx?content_name=postgis_tut01">using Stackbuilder to install PostGIS</a> is very easy. However, running PostgreSQL/PostGIS as a service, which is the default result of such installations, has some overhead because it is running in the background no matter it is actually used or not. Note that PostgreSQL has a small footprint when in “idle”. Nevertheless, it could be useful to run PostgreSQL/PostGIS as needed using binaries.</p>
<div id="download-postgresql-and-postgis-binaries" class="section level2">
<h2>Download PostgreSQL and PostGIS Binaries</h2>
<p>PostgreSQL and PostGIS binaries are executable files and can run without installation. Here are a few good sources for information.</p>
<p><a href="https://stackoverflow.com/questions/26441873/starting-postgresql-and-pgadmin-in-windows-without-installation">Stack Overflow</a></p>
<p><a href="https://www.enterprisedb.com/download-postgresql-binaries">Enterprise DB Binaries for PostgreSQL</a></p>
<p><a href="https://postgis.net/windows_downloads/">PostGIS Zip Files</a></p>
<p><a href="https://www.postgresonline.com/journal/archives/172-Starting-PostgreSQL-in-windows-without-install.html">Command to start/stop PostgreSQL</a></p>
<p>The basic process is to unzip the PostgreSQL to a folder. Then unzip the PostGIS binary and overwrite those in PostgreSQL.</p>
</div>
<div id="commands-to-manage-postgresqlpostgis" class="section level2">
<h2>Commands to manage PostgreSQL/PostGIS</h2>
<pre class="bash"><code>
@ECHO Change to the bin folder of the downloaded/unzipped PostgreSQL Binaries
@ECHO Intialize a database cluster (data folder/directory) using initdb with -D

initdb -D c:\Users\Arthur\pgdata -U postgres -W -E UTF8 -A scram-sha-256
</code></pre>
<p>Then, create a batch file to start, stop PostgreSQL</p>
<pre class="bash"><code>
@ECHO OFF

REM Initialize the database cluster using a data folder
REM C:\PortableSoftware\pgsql\bin\initdb -D C:\PortableSoftware\pgsql\data

REM Start the service with a log file
C:\PortableSoftware\pgsql\bin\pg_ctl.exe -D C:\PortableSoftware\pgsql\data -l C:\PortableSoftware\pgsql\bin\pg.log start 

@ECHO Press any key three times to stop the service ... 
PAUSE
PAUSE
PAUSE

REM STOP the service
C:\PortableSoftware\pgsql\bin\pg_ctl.exe -D C:\PortableSoftware\pgsql\data stop
</code></pre>
<p>The above is to start PostgreSQL and below is to stop it.</p>
<pre class="bash"><code>
@ECHO OFF

REM Initialize the database using a data folder
REM C:\PortableSoftware\pgsql\bin\initdb -D C:\PortableSoftware\pgsql\data

REM Start the service with a log file
REM C:\PortableSoftware\pgsql\bin\pg_ctl.exe -D C:\PortableSoftware\pgsql\data -l pg.log start

REM STOP the service
C:\PortableSoftware\pgsql\bin\pg_ctl.exe -D C:\PortableSoftware\pgsql\data stop
</code></pre>
</div>
