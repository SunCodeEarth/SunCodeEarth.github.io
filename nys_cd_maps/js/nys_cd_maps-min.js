let reAlignMapDIV=()=>{$("#map").height(window.innerHeight-$("#pageHeader").height())};$(document).ready(reAlignMapDIV),$(window).resize(reAlignMapDIV),L.TopoJSON=L.GeoJSON.extend({addData:function(e){let a,t;if("Topology"===e.type){for(t in e.objects)e.objects.hasOwnProperty(t)&&(a=topojson.feature(e,e.objects[t]),L.GeoJSON.prototype.addData.call(this,a));return this}return L.GeoJSON.prototype.addData.call(this,e),this}}),L.topoJson=function(e,a){return new L.TopoJSON(e,a)},String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(a,t){return void 0!==e[t]?e[t]:a}))};let checkStr=String.fromCharCode(10003,32),spaceStr=String.fromCharCode(160,160,160,160);var map=L.map("map",{fullscreenControl:!0}).setView([42.756,-75.8],7).fitBounds([[40.496103,-79.762152],[45.01585,-71.856214]]);let baseMapLayerNames=["Esri.WorldGrayCanvas","CartoDB.Positron","OpenStreetMap.Mapnik","Stadia.AlidadeSmooth"],basenMapLayers=Array(baseMapLayerNames.length).fill(null);baseMapLayerNames.forEach(((e,a)=>{$("#baseMapDIV").append('<a href="#" class="w3-bar-item w3-button" id="bmap{0}" onclick="switchBaseMap({0})">{1}</a>'.format(a,e+spaceStr)),basenMapLayers[a]=L.tileLayer.provider(e)})),switchBaseMap=e=>{let a=$("#bmap"+e).text();for(let t=0;t<baseMapLayerNames.length;++t)t!=e||a.includes(checkStr)?(basenMapLayers[t].removeFrom(map),$("#bmap"+t).text(baseMapLayerNames[t]+spaceStr)):(basenMapLayers[t].addTo(map),$("#bmap"+t).text(checkStr+baseMapLayerNames[t]))},switchBaseMap(0);let dataNames=["IRC Plan A","IRC Plan B","State Legislature","State Court"],jsonMapLayers=Array(4).fill(null),layerColors=d3.schemeSet1.slice(0,4),opacityInterpolator=d3.scaleSequential().domain([.5,-.3]);for(let e=0;e<dataNames.length;++e)jsonMapLayers[e]=L.topoJson(null,{style:function(a){return{color:layerColors[e],opacity:1,weight:1,fillColor:layerColors[e],fillOpacity:opacityInterpolator(a.properties.CCDistPop)}},onEachFeature:function(a,t){t.bindPopup("<p>The compactness measure of the district: <br>                         Geometry CCPD: {0} <br>                         Populate Weighted CCPD: {1} <br><br>                         * CCPD is maximum Coverage Circle Path Distance-based metric.                        * compactness is opposite of gerrymandering.</p>".format(a.properties.CCDist,a.properties.CCDistPop)),t.on({mouseover:e=>{e.target.setStyle({fillColor:"#000",fillOpacity:t.options.fillOpacity+.2,weight:2})},mouseout:a=>jsonMapLayers[e].resetStyle(a.target)})}}),fetch("./data/"+dataNames[e]+".topojson").then((e=>e.json())).then((a=>{jsonMapLayers[e].addData(a)}));jsonMapLayers[0].addTo(map),switchMapLayer=e=>{let a=$("#map"+e).text();a.includes(checkStr)?(jsonMapLayers[e].removeFrom(map),$("#map"+e).text(a.replace(checkStr,""))):(jsonMapLayers[e].addTo(map),$("#map"+e).text(checkStr+a))};